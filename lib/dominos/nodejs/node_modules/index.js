var synthetics = require('Synthetics');
const log = require('SyntheticsLogger');

const recordedScript = async function () {
  let page = await synthetics.getPage();
  
  const navigationPromise = page.waitForNavigation()
  
  await synthetics.executeStep('Goto_0', async function() {
    await page.goto("https://www.dominos.bg/#", {waitUntil: 'domcontentloaded', timeout: 60000})
  })
  
  await page.setViewport({ width: 1920, height: 912 })
  
  await synthetics.executeStep('Click_1', async function() {
    await page.waitForSelector('.container > #navigation > .nav > li > .open-modal')
    await page.click('.container > #navigation > .nav > li > .open-modal')
  })
  
  await synthetics.executeStep('Click_2', async function() {
    await page.waitForSelector('.col-xs-12 > .row > .form-group > .select-wrapper > .form-control')
    await page.click('.col-xs-12 > .row > .form-group > .select-wrapper > .form-control')
  })
  
  await synthetics.executeStep('Select_3', async function() {
    await page.select('.col-xs-12 > .row > .form-group > .select-wrapper > .form-control', '54')
  })
  
  await navigationPromise
  
  await synthetics.executeStep('Click_4', async function() {
    await page.waitForSelector('.container > #navigation > .nav > li > .button')
    await page.click('.container > #navigation > .nav > li > .button')
  })
  
};
exports.handler = async () => {
    return await recordedScript();
};